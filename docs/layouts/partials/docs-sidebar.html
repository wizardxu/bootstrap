<form class="bd-search d-flex align-items-center">
  <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
  <button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse" data-target="#bd-docs-nav" aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation">
    {{ partial "icons/menu.svg" (dict "class" "" "width" "30" "height" "30") }}
  </button>
</form>

<nav class="collapse bd-links" id="bd-docs-nav">
  {{ $.Scratch.Set "page_slug" (trim (delimit (last 2 (split .Permalink "/")) " ") " ") }}

  {{ range $group := .Site.Data.nav }}
  {{ $.Scratch.Set "link_slug" ((first 1 $group.pages).title | urlize) }}
  {{ $.Scratch.Set "group_slug" ($group.title | urlize) }}

  <div class="bd-toc-item{{ if (eq .Params.group ($.Scratch.Get "group_slug")) }} active{{ end }}">
    <a class="bd-toc-link" href="{{ .Site.BaseURL }}/docs/{{ .Site.Params.docs_version }}/{{ $.Scratch.Get "group_slug" }}/{{ $.Scratch.Get "link_slug" }}{{ if not (($.Scratch.Get "link_slug") "") }}/{{ end }}">
      {{ $group.title }}
    </a>

    <ul class="nav bd-sidenav">
      {{ range $doc := $group.pages }}
      {{ $.Scratch.Set "doc_slug" ($doc.title | urlize) }}

      <li{{ if (and (eq .Params.group ($.Scratch.Get "group_slug")) (eq ($.Scratch.Get "page_slug") ($.Scratch.Get "doc_slug"))) }} active bd-sidenav-active{{ end }}>
        <a href="{{ .Site.BaseURL }}/docs/{{ .Site.Params.docs_version }}/{{ $.Scratch.Get "group_slug" }}/{{ $.Scratch.Get "doc_slug" }}/">
          {{ $doc.title }}
        </a>
      </li>
      {{ end }}
    </ul>
  </div>
  {{ end }}
</nav>
